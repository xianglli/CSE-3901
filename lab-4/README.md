# CSE TA application system by Future Tech Corp

## important notice
This project can be run on operating systems with ```docker``` and ```docker-compose``` installed. But we did not fully test the project on Windows, so some of unexpected error maybe produced due to the file system privillage. If your system do not support ```docker``` (e.g, WSL 1 or OpenVZ VPS), you can use bare install instead. We do not fully test on bare machine install.

## Overview
Currently CSE department is hiring teaching assistant in a very traditional mode, that is, using email for application and recommandations, this project is helping CSE department doing digital transformation on TA applications.

This project is part of CSE 3901 course. We want to thank all our past and present community contributors and are really interested in all new potential contributions. For this project no contribution is too small, we encourage all types of contributions.



## How to use

### How to deploy

#### Deploy with Docker (Recommanded)
For windows and macOS users, you can use ```docker desktop``` to run this project. However, if you are using ```docker desktop``` with ```WSL2``` backend, you may face performance issue since we will share local dictory into docker.

If you are using an linux machine (exclude WSL), Make sure that you have ```docker``` and ```docker-compose``` installed on your machine.

Run ```docker-compose build``` to build rails enviroment.

Run ```docker-compose up -d``` to run the whole lab-4 dockers.

Once the containers run properly, you can run ```docker-compose run yarn```, after that, run ```docker-compose run rails db:create```,```docker-compose run rails db:migrate```,```docker-compose run rails db:seed```.

The docker file seperate db and rails. The docker is for culculate only. DB storage is in docker volumn, you can change them in ```docker-compose.yml```.

#### Deploy on bare machine
If you are running this project on a machine without docker or you would like to install docker, you can run that on bare machine.

Make sure that your have ruby and postgres installed on your enviroment. Our supported ruby verison is ```3.0.2```, that can be checked with command ```ruby -v```.

Then clone this project into your local file system, run ```bundle install```, ```yarn```,```rails db:create```, ```rails db:migrate```, ```rails db:seed```.

### How to initialize
After creating the service, open ```localhost:3000``` via broswer, it may takes several seconds to make rails server run in the container. A admin user is initialized and it should be deleted once a new admin is created. 

The login credential of the temp admin is email ```deleteme.1@osu.edu``` and password ```deleteme```. The only purpose this user created is grant admin to the first actual admin.

## Develope guide
This project is maintained CSE 3901 group 1, Future Tech Corp. At the same time, we are very eager to receive contributions from anybody. This section covers all you need to know if you want to see your code or documentation changes be added to our project and appear in the future releases.

### Important Gems used in the project
* Tresile set: This set of gems provide our basic function, UI and basic CURD. The set includes three main component, ```tresile``` is the main part, ```tresile-auth```* is used as a authentication & authorization part. ```tresile-search``` is for searching.

    \* The ```tresile-auth``` modified a little bit for this project, so we use a Github repo instead of Rubygem.org version.

* pg_search: We are using that in our seaching part.

### Code structure
We are using code struture exactly generated by ```rails```, but all admin page, as well as the CURD maintained by ```tresile```, is put in ```app/admin```. As per others, rails model will in ```app/model```, rails controllers will in ```app/controller```, and views are in ```app/view```. Database structure and files are in ```db/migrate``` and ```db/seeds.rb``` is for seed file.

If you are consideing modify docker things, we have three files related to docker, they are all in root, which are ```Dockerfile```, ```docker-compose.yml```, ```entrypoint.sh```.

### important model list
* course : all the course info. They are from Ohio State University website.
* section : Section information related to courses.
* user : all the user information, including login credencials, as well as personal informations.
* student_assistant_application  : all the application form by students.

### add a new model administrated by tresle
Assuming you would like to create a new model ```Article```
Run ```docker-compose run rails g model Article```
Once the model created, you can run ```docker-compose run rails generate trestle:resource Article``` to add it into tresle.

### after you update your code
If you make changes to the Gemfile or the Compose file to try out some different configurations, you need to rebuild. Some changes require only ```docker-compose up --build```, but a full rebuild requires a re-run of ```docker-compose run web bundle install``` to sync changes in the ```Gemfile.lock``` to the host, followed by ```docker-compose up --build```.

Here is an example of the first case, where a full rebuild is not necessary. Suppose you simply want to change the exposed port on the local host from ```3000``` in our first example to ```3001```. Make the change to the Compose file to expose port ```3000``` on the container through a new port, ```3001```, on the host, and save the changes:
```
ports:
  - "3001:3000"
```
Now, rebuild and restart the app with ```docker-compose up --build```.

Inside the container, your app is running on the same port as before ```3000```, but the Rails Welcome is now available on ```http://localhost:3001``` on your local host.



